---
// src/pages/index.astro
import { getCollection } from 'astro:content';

const allNewsletters = await getCollection('newsletters');
allNewsletters.sort((a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf());
---

<html lang="sk">
<head>
    <meta charset="UTF-8">
    <title>Archív Newslettrov</title>
    <style>
        body { font-family: sans-serif; max-width: 800px; margin: 40px auto; }
        ul { list-style: none; padding: 0; }
        li { margin-bottom: 1rem; }
        a { font-size: 1.2rem; }
    </style>
</head>
<body>
    <h1>Archív Newslettrov</h1>
    <ul>
        {allNewsletters.map(newsletter => (
            <li>
                <span>{newsletter.data.publishDate.toLocaleDateString('sk-SK')}</span> <a href={`/newsletters/${newsletter.slug}`}>{newsletter.data.title}</a>
            </li>
        ))}
    </ul>
</body>
</html>